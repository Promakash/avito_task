# **–ê–≤–∏—Ç–æ shop**

## **–ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä—á–∞**

–í –ê–≤–∏—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–∞–≥–∞–∑–∏–Ω –º–µ—Ä—á–∞, –≥–¥–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –º–æ–≥—É—Ç –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –∑–∞ –º–æ–Ω–µ—Ç—ã (coin). –ö–∞–∂–¥–æ–º—É –Ω–æ–≤–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –≤—ã–¥–µ–ª—è–µ—Ç—Å—è 1000 –º–æ–Ω–µ—Ç, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–Ω–µ—Ç—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –≤ –∑–Ω–∞–∫ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –∏–ª–∏ –∫–∞–∫ –ø–æ–¥–∞—Ä–æ–∫.

## **–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏**

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –º–æ–Ω–µ—Ç–∫–∞–º–∏ –∏ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç—å –Ω–∞ –Ω–∏—Ö –º–µ—Ä—á. –ö–∞–∂–¥—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∏–¥–µ—Ç—å:

- –°–ø–∏—Å–æ–∫ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∏–º –º–µ—Ä—á–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤  
- –°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –º–æ–Ω–µ—Ç–æ–∫ –≤ –µ–≥–æ –∫–æ—à–µ–ª—å–∫–µ, –≤–∫–ª—é—á–∞—è:  
  - –ö—Ç–æ –µ–º—É –ø–µ—Ä–µ–¥–∞–≤–∞–ª –º–æ–Ω–µ—Ç–∫–∏ –∏ –≤ –∫–∞–∫–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ  
  - –ö–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–µ—Ä–µ–¥–∞–≤–∞–ª –º–æ–Ω–µ—Ç–∫–∏ –∏ –≤ –∫–∞–∫–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ  

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º, –∑–∞–ø—Ä–µ—â–µ–Ω–æ —É—Ö–æ–¥–∏—Ç—å –≤ –º–∏–Ω—É—Å –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å –º–æ–Ω–µ—Ç–∫–∞–º–∏.

## **–û–±—â–∏–µ –≤–≤–æ–¥–Ω—ã–µ**

–ú–µ—Ä—á ‚Äî —ç—Ç–æ –ø—Ä–æ–¥—É–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –∑–∞ –º–æ–Ω–µ—Ç–∫–∏. –í—Å–µ–≥–æ –≤ –º–∞–≥–∞–∑–∏–Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ 10 –≤–∏–¥–æ–≤ –º–µ—Ä—á–∞. –ö–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ü–µ–Ω—É. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω —Å–ø–∏—Å–æ–∫ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π –∏ –∏—Ö —Ü–µ–Ω—ã.

| –ù–∞–∑–≤–∞–Ω–∏–µ     | –¶–µ–Ω–∞ |
|--------------|------|
| t-shirt      | 80   |
| cup          | 20   |
| book         | 50   |
| pen          | 10   |
| powerbank    | 200  |
| hoody        | 300  |
| umbrella     | 200  |
| socks        | 10   |
| wallet       | 50   |
| pink-hoody   | 500  |

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –≤ –º–∞–≥–∞–∑–∏–Ω–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –∑–∞–ø–∞—Å –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ –º–µ—Ä—á–∞.

## **–£—Å–ª–æ–≤–∏—è**

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç [API](https://github.com/avito-tech/tech-internship/blob/main/Tech%20Internships/Backend/Backend-trainee-assignment-winter-2025/schema.json).
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ 100k, RPS ‚Äî 1k, SLI –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ ‚Äî 50 –º—Å, SLI —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ ‚Äî 99.99%.  
- –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–æ–≤ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è JWT. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ API –≤—ã–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –±–∏–∑–Ω–µ—Å-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏. –û–±—â–µ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 40%.
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∏–ª–∏ E2E-—Ç–µ—Å—Ç –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–∫—É–ø–∫–∏ –º–µ—Ä—á–∞.
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∏–ª–∏ E2E-—Ç–µ—Å—Ç –Ω–∞ —Å—Ü–µ–Ω–∞—Ä–∏–π –ø–µ—Ä–µ–¥–∞—á–∏ –º–æ–Ω–µ—Ç–æ–∫ –¥—Ä—É–≥–∏–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º.

## **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è**

–≠—Ç–∏ –∑–∞–¥–∞–Ω–∏—è –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏, –Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–ª–∏ —á–∞—Å—Ç–∏ –∏–∑ –Ω–∏—Ö –¥–∞—Å—Ç –≤–∞–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–∏–º–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏:

- –ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –∏ –ø—Ä–∏–ª–æ–∂–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –∏–ª–∏ E2E-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –û–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ª–∏–Ω—Ç–µ—Ä–∞ (.golangci.yaml –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è Go, phpstan.neon –¥–ª—è PHP –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Ñ–∞–π–ª, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥—Ä—É–≥–æ–π –Ø–ü)

---

## **–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞**

### **1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**

```bash
git clone git@github.com:Promakash/avito_task.git
cd avito_task
```

### **2Ô∏è‚É£ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞**

```bash
# –°–±–æ—Ä–∫–∞ Docker-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
make build
```

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (detached)
make run
```

```bash
# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ 
make run_tests
```

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make stop
```

---

## **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∑–∞–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ YAML-—Ñ–∞–π–ª –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `docker-compose.yaml`.

### **üìå HTTP-—Å–µ—Ä–≤–µ—Ä**

| –ü–∞—Ä–∞–º–µ—Ç—Ä       | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ               |
|----------------|----------|------------------------|
| address        | ":8080"  | –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞          |
| read_timeout   | 5s       | –¢–∞–π–º–∞—É—Ç —á—Ç–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ |
| write_timeout  | 5s       | –¢–∞–π–º–∞—É—Ç –∑–∞–ø–∏—Å–∏ –æ—Ç–≤–µ—Ç–∞  |
| idle_timeout   | 30s      | –¢–∞–π–º–∞—É—Ç –ø—Ä–æ—Å—Ç–æ—è        |

### **üìå JWT-—Å–µ–∫—Ä–µ—Ç**

–ó–∞–¥–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ env `AUTH_SECRET`.

### **üìå PostgreSQL**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ  | –û–ø–∏—Å–∞–Ω–∏–µ         |
|----------|-----------|------------------|
| host     | db        | –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| port     | 5432      | –ü–æ—Ä—Ç PostgreSQL  |
| user     | postgres  | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| password | password  | –ü–∞—Ä–æ–ª—å           |
| db_name  | shop      | –ù–∞–∑–≤–∞–Ω–∏–µ –ë–î      |

### **üìå Redis**

| –ü–∞—Ä–∞–º–µ—Ç—Ä       | –ó–Ω–∞—á–µ–Ω–∏–µ    | –û–ø–∏—Å–∞–Ω–∏–µ                |
|----------------|-------------|-------------------------|
| host           | user-cache  | –•–æ—Å—Ç Redis              |
| port           | 6379        | –ü–æ—Ä—Ç Redis              |
| password       | redis       | –ü–∞—Ä–æ–ª—å Redis            |
| TTL            | 30m         | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞        |
| write_timeout  | 3s          | –¢–∞–π–º–∞—É—Ç –∑–∞–ø–∏—Å–∏ –≤ Redis  |
| read_timeout   | 2s          | –¢–∞–π–º–∞—É—Ç —á—Ç–µ–Ω–∏—è –∏–∑ Redis |

### **üìå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

| –ü–∞—Ä–∞–º–µ—Ç—Ä  | –ó–Ω–∞—á–µ–Ω–∏–µ    | –û–ø–∏—Å–∞–Ω–∏–µ                                                    |
|-----------|------------|-------------------------------------------------------------|
| level     | debug       | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤ (debug, info, error) (default = info)        |
| format    | json        | –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ (json, text) (default = json)                 |
| directory | /app/logs   | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (default = "/app/logs")  |

---

## **–í–æ–∑–Ω–∏–∫—à–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ —É—Ç–æ—á–Ω–µ–Ω–∏—è**

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ –º–æ–π –ø–æ–¥—Ö–æ–¥ –∫ –∏—Ö —Ä–µ—à–µ–Ω–∏—é.

---

### **–í–æ–ø—Ä–æ—Å 1**
–í –æ–ø–∏—Å–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API —Å–∫–∞–∑–∞–Ω–æ, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫—Ç–æ –µ–º—É –ø–µ—Ä–µ–¥–∞–≤–∞–ª –º–æ–Ω–µ—Ç–∫–∏ –∏ –∫–æ–º—É –ø–µ—Ä–µ–¥–∞–≤–∞–ª –æ–Ω. –ù—É–∂–Ω–æ –ª–∏ –≤ —Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–∫—É–ø–∫–∏ –≤ —à–æ–ø–µ?

#### **–†–µ—à–µ–Ω–∏–µ**
–õ–æ–≥–∏—á–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø–æ–∫—É–ø–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ —Ç–∞–∫–∂–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ —Ä–∞—Å—Ö–æ–¥ –º–æ–Ω–µ—Ç–æ–∫

–ü—Ä–∏–º–µ—Ä `InfoResponse` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –∫—É–ø–∏–ª —Ç–æ–≤–∞—Ä:

```json
{
  "coins": 800,
  "inventory": [
    {
      "type": "umbrella",
      "quantity": 1
    }
  ],
  "coinHistory": {
    "received": [],
    "sent": [
      {
        "toUser": "shop",
        "amount": 200
      }
    ]
  }
}
```

---

### **–í–æ–ø—Ä–æ—Å 2**
–ù–∞–¥–æ –ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?

#### **–†–µ—à–µ–Ω–∏–µ**
–•–æ—Ç—å —Å–µ–π—á–∞—Å –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–æ, –∫–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –≤–µ—â—å, —Ç–∞–∫ –∫–∞–∫ —Ö–æ—Ç—å –∏ —É–¥–∞–ª—è–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å/–ø–æ–ª—É—á–∞—Ç–µ–ª—å, –Ω–æ —Ñ–∞–∫—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–º–µ–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ö–µ–º—ã –ë–î, —è —Ä–µ—à–∏–ª –æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã, –¥–∞–∂–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞.

–°—Ö–µ–º–∞ –±–¥ –ø—Ä–∏ —Ç–∞–∫–æ–º –ø–æ–¥—Ö–æ–¥–µ:
```sql
    id         SERIAL PRIMARY KEY,
    sender     INT NULL,
    recipient  INT NULL,
    amount     INT NOT NULL CHECK (amount >= 0),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
    FOREIGN KEY (sender) REFERENCES employees (id) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (recipient) REFERENCES employees (id) ON DELETE SET NULL ON UPDATE CASCADE
```

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ UserInfo –ø–æ–ª—É—á–∞—Ç–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤–∏–¥–µ—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –¥–∞–∂–µ –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å –≤—Ç–æ—Ä–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —É–∂–µ —É–¥–∞–ª–µ–Ω–∞. –í—ã–≥–ª—è–¥–µ—Ç—å —ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –≤–æ—Ç —Ç–∞–∫:
```json
{
  "coins": 800,
  "inventory": [],
  "coinHistory": {
    "received": [],
    "sent": [
      {
        "toUser": "deleted",
        "amount": 200
      }
    ]
  }
}
```
–ò–∑ –º–∏–Ω—É—Å–æ–≤ —Å—Ç–æ–∏–ª–æ –±—ã –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Ç–∞–∫ –∂–µ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä AFTER DELETE –Ω–∞ employees, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≥–¥–µ receiver –∏ sender —Å—Ç–∞–ª–∏ NULL.

---

### **–í–æ–ø—Ä–æ—Å 3**
–í –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏?

#### **–†–µ—à–µ–Ω–∏–µ**
–í –∑–∞–¥–∞–Ω–∏–∏ –Ω–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏–π, –∫–∞–∫ –Ω—É–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω–æ –º–Ω–µ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å –±—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º, –µ—Å–ª–∏ –±—ã –æ–Ω–∏ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ: —Å–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ –∑–∞—Ç–µ–º —Å—Ç–∞—Ä—ã–µ. –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –í –Ω–∞—á–∞–ª–µ –º–∞—Å—Å–∏–≤–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è –±–æ–ª–µ–µ –Ω–æ–≤—ã–µ.

---

### **–í–æ–ø—Ä–æ—Å 4**
–ë—É–¥–µ—Ç –ª–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏–∑–º–µ–Ω—è—Ç—å—Å—è —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–ª–∏ —Å–∞–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç?

#### **–†–µ—à–µ–Ω–∏–µ**
–í –∑–∞–¥–∞–Ω–∏–∏ —Å–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –≤—Å–µ–≥–æ –±—É–¥–µ—Ç 10 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤, –ø–æ—ç—Ç–æ–º—É —è —Å–¥–µ–ª–∞–ª –¥–æ–ø—É—â–µ–Ω–∏–µ, —á—Ç–æ —Ç–æ–≤–∞—Ä—ã –∏ –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–Ω—ã–º–∏ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –º–Ω–µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ sync.Map (–ø–æ–¥–Ω–∏–º–∞—Ç—å —Ü–µ–ª—ã–π redis –¥–ª—è 10 –∑–∞–ø–∏—Å–µ–π –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è —ç—Ç–æ —á–µ—Ä–µ—Å—á—É—Ä). –ß—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Ç–æ–≤–∞—Ä–∞.

---

### **–í–æ–ø—Ä–æ—Å 5**
–ï—Å—Ç—å –ª–∏ —Å–º—ã—Å–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis?

#### **–†–µ—à–µ–Ω–∏–µ**
–í –∑–∞–¥–∞–Ω–∏–∏ –æ–≥–æ–≤–æ—Ä–µ–Ω–∞ –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (1k RPS) –∏ –¥–æ 100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –†–∞–∑—É–º–Ω–æ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤ Redis –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä–∫—É –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö. –¢–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–∑–≥—Ä—É–∑–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –º—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –Ω–µ–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `id` –ø–æ –∏–º–µ–Ω–∏. –ü—Ä–∏ —ç—Ç–æ–º, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Ö–ª–∞–º–ª—è—Ç—å Redis, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TTL (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 –º–∏–Ω—É—Ç).
